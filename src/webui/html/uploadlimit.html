<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>_(Torrent Upload Speed Limiting)</title>
	<link rel="stylesheet" href="css/style.css" type="text/css" />
	<script type="text/javascript" src="scripts/mootools-1.2-core-yc.js" charset="utf-8"></script>
	<script type="text/javascript" src="scripts/mootools-1.2-more.js" charset="utf-8"></script>
	<script type="text/javascript" src="scripts/mocha-yc.js" charset="utf-8"></script>
	<script type="text/javascript" src="scripts/parametrics.js" charset="utf-8"></script>
</head>
<body>
	<form class="sliderForm">
		<div class="sliderWrapper"></div>
		<div class="sliderInput">
			<input id="limitValue" type="text" value="1 _(KiB/s)" style="width: 100%; box-sizing: border-box;" />
		</div>

		<div style="clear: both; float: right; margin-top: 5px">
			<input type="submit" value="_(OK)"/>
			<input type="button" value="_(Cancel)" onclick="window.parent.closeWindows();"/>
		</div>
	</form>

<script type="text/javascript">
(function () {
	var hash = new URI().getData('hash');
	
	$$('form.sliderForm').addEvent('submit', function (event) {
		event.stop();

		var limit = Number.max(0, $("limitValue").get('value').toInt() * 1024);
		new Request({
			url: hash === 'global' ? 'command/setGlobalUpLimit' : 'command/setTorrentUpLimit',
			method: 'post',
			data: {
				'hash': hash,
				'limit': limit
			},
			onComplete: function () {
				window.parent.closeWindows();
			}
		}).send();
	});

	MochaUI.setupSlider('Up', hash);
})();
</script>
</body>
</html>